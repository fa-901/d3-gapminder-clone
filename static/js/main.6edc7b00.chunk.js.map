{"version":3,"sources":["App.js","index.js"],"names":["App","chartArea","useRef","margin","left","right","top","bottom","area","r","Math","pow","PI","useEffect","width","current","clientWidth","height","document","documentElement","clientHeight","index","g","d3","append","attr","concat","x","domain","range","xAxis","y","yAxis","xAxisCall","tickValues","tickFormat","d","yAxisCall","call","text","yearLabel","t","duration","timer","legendGroup","map","v","i","toLowerCase","addLegend","tip","d3Tip","html","react_default","a","createElement","react","className","country","continent","life_exp","income","population","ReactDOMServer","renderToStaticMarkup","update","data","json","countries","filter","year","points","selectAll","exit","remove","enter","sqrt","on","show","hide","merge","transition","setInterval","length","startChart","href","id","src","ref","rootElement","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.6edc7b00.chunk.js","sourcesContent":["import React, { useEffect, useRef, Fragment } from \"react\";\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport * as d3 from 'd3';\r\nimport d3Tip from 'd3-tip';\r\nimport \"./styles/styles.css\";\r\nimport \"./styles/tip.css\";\r\nimport json from './data/data.json'\r\n\r\nexport default function App() {\r\n\r\n\tconst chartArea = useRef(null);\r\n\tconst margin = { left: 50, right: 50, top: 10, bottom: 40 };\r\n\tconst timer = 800;\r\n\r\n\tuseEffect(() => {\r\n\t\tstartChart();\r\n\t});\r\n\r\n\tfunction area(r) {\r\n\t\treturn (Math.pow(r, 2) * Math.PI)\r\n\t}\r\n\r\n\tfunction startChart() {\r\n\t\tconst width = chartArea.current.clientWidth - margin.left - margin.right,\r\n\t\t\theight = (document.documentElement.clientHeight - 80) - margin.top - margin.bottom;\r\n\t\tconst timer = 800;\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tvar g = d3.select(\"#chart-area\")\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width + margin.left + margin.right)\r\n\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\r\n\r\n\t\tvar x = d3.scaleLog()\r\n\t\t\t.domain([100, 200000])\r\n\t\t\t.range([0, width]);\r\n\r\n\t\tvar xAxis = g.append(\"g\")\r\n\t\t\t.attr(\"class\", \"x axis\")\r\n\t\t\t.attr('transform', `translate(0, ${height})`);\r\n\r\n\t\tvar y = d3.scaleLinear()\r\n\t\t\t.domain([0, 90])\r\n\t\t\t.range([height, 0]);\r\n\r\n\t\tvar yAxis = g.append(\"g\")\r\n\t\t\t.attr(\"class\", \"y axis\")\r\n\t\t\t.attr('transform', `translate(0, 0)`);\r\n\r\n\t\tvar xAxisCall = d3.axisBottom(x)\r\n\t\t\t.tickValues([400, 4000, 40000])\r\n\t\t\t.tickFormat((d) => { return `$${d}` })\r\n\r\n\t\tvar yAxisCall = d3.axisLeft(y);\r\n\r\n\t\txAxis.call(xAxisCall)\r\n\t\tyAxis.call(yAxisCall)\r\n\r\n\t\tvar xLabel = g.append('text')\r\n\t\t\t.text('GDP Per Capita')\r\n\t\t\t.attr('x', width / 2)\r\n\t\t\t.attr('y', (height + margin.bottom - 5))\r\n\t\t\t.attr('text-anchor', 'middle')\r\n\t\t\t.attr('font-size', '18px')\r\n\t\t\t.attr('text-anchor', 'middle')\r\n\r\n\t\tvar yLabel = g.append('text')\r\n\t\t\t.attr('x', -(height / 2))\r\n\t\t\t// .attr('y', -(margin.left - margin.right))\r\n\t\t\t.attr('y', -30)\r\n\t\t\t.attr('text-anchor', 'middle')\r\n\t\t\t.attr('font-size', '18px')\r\n\t\t\t.attr('text-anchor', 'middle')\r\n\t\t\t.attr('transform', 'rotate(-90)')\r\n\t\t\t.text('Life Expectancy (Years)')\r\n\r\n\t\tvar yearLabel = g.append('text')\r\n\t\t\t.attr('x', width)\r\n\t\t\t.attr('y', (height - 3))\r\n\t\t\t.attr('class', 'year-label');\r\n\r\n\t\tvar t = d3.transition().duration(timer / 2);\r\n\r\n\t\taddLegend(g, width, height);\r\n\r\n\t\tvar tip = d3Tip()\r\n\t\t\t.attr('class', 'd3-tip')\r\n\t\t\t.html((d) => {\r\n\t\t\t\tlet html = (\r\n\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span>Country:</span><span className='ml-2 tiptext'>{d.country}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span>Continent:</span><span className='ml-2 tiptext'>{d.continent}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span>Life Expectancy:</span><span className='ml-2 tiptext'>{d3.format('.2f')(d.life_exp)}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span>GDP Per Capita:</span><span className='ml-2 tiptext'>{d3.format('$,.0f')(d.income)}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span>Population:</span><span className='ml-2 tiptext'>{d3.format(',.0f')(d.population)}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t)\r\n\t\t\t\treturn ReactDOMServer.renderToStaticMarkup(html);\r\n\t\t\t});\r\n\r\n\t\tg.call(tip);\r\n\r\n\t\tvar update = () => {\r\n\t\t\tlet data = json[index].countries;\r\n\t\t\tdata = data.filter((v) => {\r\n\t\t\t\treturn (!v.income || !v.life_exp) ? false : true\r\n\t\t\t});\r\n\r\n\t\t\tvar r = d3.scaleLinear()\r\n\t\t\t\t.domain([d3.min(data, (d) => { return d.population }), d3.max(data, (d) => { return d.population })])\r\n\t\t\t\t.range([area(5), area(25)]);\r\n\r\n\t\t\tyearLabel.text(`${json[index].year}`);\r\n\r\n\t\t\tlet radius = 5;\r\n\r\n\t\t\tvar points = g.selectAll(\"circle\")\r\n\t\t\t\t.data(data, (d) => { return d.country });\r\n\r\n\t\t\tpoints.exit()\r\n\t\t\t\t.attr('cy', y(0))\r\n\t\t\t\t.remove();\r\n\r\n\t\t\tpoints.enter()\r\n\t\t\t\t.append(\"circle\")\r\n\t\t\t\t.attr(\"cy\", function (d) { return y(0) })\r\n\t\t\t\t.attr(\"cx\", function (d) { return x(d.income) })\r\n\t\t\t\t.attr('r', function (d) { return Math.sqrt(r(d.population) / Math.PI) })\r\n\t\t\t\t.on('mouseover', tip.show)\r\n\t\t\t\t.on('mouseout', tip.hide)\r\n\t\t\t\t.merge(points)\r\n\t\t\t\t.transition(t)\r\n\t\t\t\t.attr(\"class\", (d) => { return `point fill-${d.continent}` })\r\n\t\t\t\t.attr(\"cy\", function (d) { return y(d.life_exp) })\r\n\t\t\t\t.attr(\"cx\", function (d) { return x(d.income) });\r\n\t\t}\r\n\r\n\t\tsetInterval(() => {\r\n\t\t\t(index === (json.length - 1)) ? index = 0 : index++;\r\n\t\t\tupdate();\r\n\t\t}, timer);\r\n\t\tupdate();\r\n\t}\r\n\r\n\tfunction addLegend(g, width, height) {\r\n\t\tvar legendGroup = g.append('g');\r\n\t\t\r\n\t\t['Asia', 'Africa', 'Europe', 'Americas'].map((v, i) => {\r\n\t\t\tlet y = i * 40\r\n\t\t\tlegendGroup.append('rect')\r\n\t\t\t\t.attr('width', 10)\r\n\t\t\t\t.attr('height', 10)\r\n\t\t\t\t.attr('x', (width + (margin.right / 2)) - 5)\r\n\t\t\t\t.attr('class', `point fill-${v.toLowerCase()}`)\r\n\t\t\t\t.attr('y', y)\r\n\t\t\tlegendGroup.append('text')\r\n\t\t\t\t.attr('x', (width + (margin.right / 2)))\r\n\t\t\t\t.attr('y', y + 25)\r\n\t\t\t\t.attr('class', 'legend')\r\n\t\t\t\t.text(v)\r\n\t\t});\r\n\r\n\t\tlegendGroup.attr('transform', `translate(0, 70)`)\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<nav className=\"navbar navbar-default\">\r\n\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t<a className=\"navbar-brand\" href=\"#\"><img id=\"logo\" src=\"img/logo.png\" /></a>\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div id=\"chart-area\" ref={chartArea}></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}